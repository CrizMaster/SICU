<form [formGroup]="form" (ngSubmit)="agregar()">
  <h1 mat-dialog-title class="bg-cofopri text-white">Agregar Construcción</h1>
  <div mat-dialog-content class="px-4" style="font-size: 0.9rem;">
    <div class="row my-2">
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Nro
          </div>
          <div class="col-md-12">
            <input type="text" formControlName="nro"
                  class="form-control form-control-sm border focus-ring"
                  [class.border-success]="this.form.get('nro')?.valid"
                  [class.focus-ring-success]="this.form.get('nro')?.valid"
                  [class.border-danger]="this.form.get('nro')?.invalid && this.form.get('nro')?.touched"
                  [class.focus-ring-danger]="this.form.get('nro')?.invalid && this.form.get('nro')?.touched">
            <i *ngIf="this.form.get('nro')?.invalid && this.form.get('nro')?.touched" 
                  class="position-icon-input bi bi-exclamation-circle-fill text-danger"
                  title="Campo requerido"></i>              
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            ECC
          </div>
          <div class="col-md-12" style="position: relative;">
            <!-- (change)="onChangeSelTipoTitular(SelECC.value)" -->
            <select name="ecc" #SelECC
                    formControlName="ecc"                    
                    class="form-select form-select-sm border focus-ring" 
                    [class.border-success]="this.form.get('ecc')?.valid"
                    [class.focus-ring-success]="this.form.get('ecc')?.valid"
                    [class.border-danger]="this.form.get('ecc')?.invalid && this.form.get('ecc')?.touched"
                    [class.focus-ring-danger]="this.form.get('ecc')?.invalid && this.form.get('ecc')?.touched"
                    aria-label="select-ecc" [pattern]="pattern1Digs">
                    <option *ngFor="let cv of listaECC" [value]="cv.value">{{ cv.text }}</option>
            </select>
            <i *ngIf="this.form.get('ecc')?.invalid && this.form.get('ecc')?.touched" 
                    class="position-icon-select bi bi-exclamation-circle-fill text-danger"
                    title="Campo requerido"></i>           
          </div>
        </div>        
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Puertas Ventanas
          </div>
          <div class="col-md-12">
            <select name="puertasventanas"
                    formControlName="puertasventanas"
                    class="form-select form-select-sm border focus-ring" 
                    [class.border-success]="this.form.get('puertasventanas')?.valid"
                    [class.focus-ring-success]="this.form.get('puertasventanas')?.valid"
                    [class.border-danger]="this.form.get('puertasventanas')?.invalid && this.form.get('puertasventanas')?.touched"
                    [class.focus-ring-danger]="this.form.get('puertasventanas')?.invalid && this.form.get('puertasventanas')?.touched"
                    aria-label="select-puertasventanas" [pattern]="pattern1Digs">
                    <option *ngFor="let cv of listaPuertasVentanas" [value]="cv.value">{{ cv.text }}</option>
            </select>
            <i *ngIf="this.form.get('puertasventanas')?.invalid && this.form.get('puertasventanas')?.touched" 
                    class="position-icon-select bi bi-exclamation-circle-fill text-danger"
                    title="Campo requerido"></i>              
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Mes/Año
          </div>
          <div class="col-md-12" style="position: relative;">
            <input matInput [matDatepicker]="dp" formControlName="mesanio" 
            [max]="maxDate"
            readonly="true" style="width: 72px;"
            class="form-control form-control-sm border focus-ring" 
            [class.border-success]="this.form.get('mesanio')?.valid"
            [class.focus-ring-success]="this.form.get('mesanio')?.valid"
            [class.border-danger]="this.form.get('mesanio')?.invalid && this.form.get('mesanio')?.touched"
            [class.focus-ring-danger]="this.form.get('mesanio')?.invalid && this.form.get('mesanio')?.touched">
            <mat-datepicker-toggle matIconSuffix [for]="dp" class="position-absolute" style="top: -8px; left:85px"></mat-datepicker-toggle>
            <mat-datepicker #dp
                            startView="multi-year"
                            (monthSelected)="setMonthAndYear($event, dp)"
                            panelClass="example-month-picker">
            </mat-datepicker>
            <i *ngIf="this.form.get('mesanio')?.invalid && this.form.get('mesanio')?.touched" 
            class="position-icon-select fa-solid fa-exclamation-circle text-danger"
            title="Campo requerido"></i>                       
          </div> 
        </div>        
      </div>
    </div>
    <div class="row my-2">
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Piso
          </div>
          <div class="col-md-12">
            <input type="text" formControlName="piso"
            class="form-control form-control-sm border focus-ring" 
            [class.border-success]="this.form.get('piso')?.valid"
            [class.focus-ring-success]="this.form.get('piso')?.valid"
            [class.border-danger]="this.form.get('piso')?.invalid && this.form.get('piso')?.touched"
            [class.focus-ring-danger]="this.form.get('piso')?.invalid && this.form.get('piso')?.touched">                  
            <i *ngIf="this.form.get('piso')?.invalid && this.form.get('piso')?.touched" 
                    class="position-icon-input bi bi-exclamation-circle-fill text-danger"
                    title="Campo requerido"></i>           
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            ECS
          </div>
          <div class="col-md-12">
            <select name="ecs"
              formControlName="ecs"
              class="form-select form-select-sm border focus-ring"
              [class.border-success]="this.form.get('ecs')?.valid"
              [class.focus-ring-success]="this.form.get('ecs')?.valid"
              [class.border-danger]="this.form.get('ecs')?.invalid && this.form.get('ecs')?.touched"
              [class.focus-ring-danger]="this.form.get('ecs')?.invalid && this.form.get('ecs')?.touched"
              aria-label="select-ecs" [pattern]="pattern1Digs">
                  <option *ngFor="let ecs of listaECS" [value]="ecs.value">{{ ecs.text }}</option>
            </select>
            <i *ngIf="this.form.get('ecs')?.invalid && this.form.get('ecs')?.touched" 
              class="position-icon-select bi bi-exclamation-circle-fill text-danger"
              title="Campo requerido"></i> 
          </div>
        </div>        
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Muros Columnas
          </div>
          <div class="col-md-12">
            <select name="muroscolumnas"
                    formControlName="muroscolumnas"
                    class="form-select form-select-sm border focus-ring"
                    [class.border-success]="this.form.get('muroscolumnas')?.valid"
                    [class.focus-ring-success]="this.form.get('muroscolumnas')?.valid"
                    [class.border-danger]="this.form.get('muroscolumnas')?.invalid && this.form.get('muroscolumnas')?.touched"
                    [class.focus-ring-danger]="this.form.get('muroscolumnas')?.invalid && this.form.get('muroscolumnas')?.touched"
                    aria-label="select-muroscolumnas" [pattern]="pattern1Digs">
                    <option *ngFor="let mc of listaMurosColumnas" [value]="mc.value">{{ mc.text }}</option>
            </select>
            <i *ngIf="this.form.get('muroscolumnas')?.invalid && this.form.get('muroscolumnas')?.touched" 
              class="position-icon-select bi bi-exclamation-circle-fill text-danger"
              title="Campo requerido"></i> 
          </div>
        </div>        
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            CIIU
          </div>
          <div class="col-md-12">
            <input type="text" formControlName="ciiu"
                  class="form-control form-control-sm border focus-ring" 
                  [class.border-success]="this.form.get('ciiu')?.valid"
                  [class.focus-ring-success]="this.form.get('ciiu')?.valid"
                  [class.border-danger]="this.form.get('ciiu')?.invalid && this.form.get('ciiu')?.touched"
                  [class.focus-ring-danger]="this.form.get('ciiu')?.invalid && this.form.get('ciiu')?.touched" mask="0000">                  
            <i *ngIf="this.form.get('ciiu')?.invalid && this.form.get('ciiu')?.touched" 
                  class="position-icon-input bi bi-exclamation-circle-fill text-danger"
                  title="Campo requerido"></i> 
          </div>
        </div>        
      </div>
    </div>
    <div class="row my-2">
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            MEP
          </div>
          <div class="col-md-12">
            <select name="mep"
              formControlName="mep"
              class="form-select form-select-sm border focus-ring"
              [class.border-success]="this.form.get('mep')?.valid"
              [class.focus-ring-success]="this.form.get('mep')?.valid"
              [class.border-danger]="this.form.get('mep')?.invalid && this.form.get('mep')?.touched"
              [class.focus-ring-danger]="this.form.get('mep')?.invalid && this.form.get('mep')?.touched"
              aria-label="select-mep" [pattern]="pattern1Digs">
                  <option *ngFor="let mep of listaMEP" [value]="mep.value">{{ mep.text }}</option>
            </select>
            <i *ngIf="this.form.get('mep')?.invalid && this.form.get('mep')?.touched" 
              class="position-icon-select bi bi-exclamation-circle-fill text-danger"
              title="Campo requerido"></i>           
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Techo
          </div>
          <div class="col-md-12">
            <select name="techo"
              formControlName="techo"
              class="form-select form-select-sm border focus-ring"
              [class.border-success]="this.form.get('techo')?.valid"
              [class.focus-ring-success]="this.form.get('techo')?.valid"
              [class.border-danger]="this.form.get('techo')?.invalid && this.form.get('techo')?.touched"
              [class.focus-ring-danger]="this.form.get('techo')?.invalid && this.form.get('techo')?.touched"
              aria-label="select-techo" [pattern]="pattern1Digs">
                  <option *ngFor="let tec of listaTecho" [value]="tec.value">{{ tec.text }}</option>
            </select>
            <i *ngIf="this.form.get('techo')?.invalid && this.form.get('techo')?.touched" 
              class="position-icon-select bi bi-exclamation-circle-fill text-danger"
              title="Campo requerido"></i> 
          </div>
        </div>        
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            UCA
          </div>
          <div class="col-md-12">
            <select name="uca"
                    formControlName="uca"
                    class="form-select form-select-sm border focus-ring"
                    [class.border-success]="this.form.get('uca')?.valid"
                    [class.focus-ring-success]="this.form.get('uca')?.valid"
                    [class.border-danger]="this.form.get('uca')?.invalid && this.form.get('uca')?.touched"
                    [class.focus-ring-danger]="this.form.get('uca')?.invalid && this.form.get('uca')?.touched"
                    aria-label="select-uca" [pattern]="pattern1Digs">
                    <option *ngFor="let u of listaUCA" [value]="u.value">{{ u.text }}</option>
            </select>
            <i *ngIf="this.form.get('uca')?.invalid && this.form.get('uca')?.touched" 
              class="position-icon-select bi bi-exclamation-circle-fill text-danger"
              title="Campo requerido"></i> 
          </div>
        </div>        
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12">
            Área verificada
          </div>
          <div class="col-md-12">
            <input type="text" formControlName="areaverificada"
            class="form-control form-control-sm border focus-ring" 
            [class.border-success]="this.form.get('areaverificada')?.valid"
            [class.focus-ring-success]="this.form.get('areaverificada')?.valid"
            [class.border-danger]="this.form.get('areaverificada')?.invalid && this.form.get('areaverificada')?.touched"
            [class.focus-ring-danger]="this.form.get('areaverificada')?.invalid && this.form.get('areaverificada')?.touched">                  
            <i *ngIf="this.form.get('areaverificada')?.invalid && this.form.get('areaverificada')?.touched" 
                    class="position-icon-input bi bi-exclamation-circle-fill text-danger"
                    title="Campo requerido"></i>           
          </div>
        </div>
      </div>
    </div>    
  </div>
  <!-- <div mat-dialog-actions class="d-flex justify-content-end">  
    <button type="submit" class="btn btn-sm btn-primary bg-cofopri text-white" 
            [disabled]="form.invalid"
            (click)="guardar()"><i class="bi bi-plus-circle"></i>&nbsp;Agregar</button>
    <button class="btn btn-sm btn-default" mat-button mat-dialog-close>Cancelar</button>
  </div> -->
  <div mat-dialog-actions class="d-flex justify-content-end">  
    <button class="btn btn-sm btn-default" mat-button mat-dialog-close>Cancelar</button>
    <button type="submit" class="btn btn-sm btn-warning" 
            [disabled]="form.invalid"
            *ngIf="data.habilitar">
            <i class="bi bi-plus-circle"></i>&nbsp;Agregar
    </button>
  </div>
</form>